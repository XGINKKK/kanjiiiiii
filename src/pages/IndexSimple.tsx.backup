import { Button } from "@/components/ui/button";
import { Check } from "lucide-react";
import { memo, useEffect } from "react";
import { AudioTestimonialsSection } from "@/components/AudioTestimonialsSection";
import { BonusSection } from "@/components/BonusSection";
import { WhatIsIncludedSection } from "@/components/WhatIsIncludedSection";
import { PricingSection } from "@/components/PricingSection";
import { FAQSection } from "@/components/FAQSection";
import { Footer } from "@/components/Footer";
import { WhatsAppButton } from "@/components/WhatsAppButton";

const IndexSimple = memo(() => {
  const scrollToCheckout = () => {
    document.getElementById("pricing")?.scrollIntoView({ behavior: "smooth" });
  };

  // Carregar script do Paradise Player
  useEffect(() => {
    // O script j√° est√° inline no HTML
  }, []);

  return (
    <div className="min-h-screen font-inter bg-gradient-to-b from-soft-blue/20 via-white to-mint/10">
      {/* Paradise Player Styles */}
      <style dangerouslySetInnerHTML={{ __html: `
        #paradisePlayer_1762642230938::-webkit-media-controls,
        #paradisePlayer_1762642230938::-webkit-media-controls-enclosure {
          display: none !important;
        }

        @keyframes paradise-fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes paradise-pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
        @keyframes paradise-glow {
          0%, 100% { box-shadow: 0 0 10px #F0716750; }
          50% { box-shadow: 0 0 20px #F0716780, 0 0 30px #F0716760; }
        }
        @keyframes paradise-shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-3px); }
          75% { transform: translateX(3px); }
        }
        @keyframes paradise-bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-8px); }
        }
        @keyframes paradise-mute-bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(calc(-10px * var(--animation-intensity))); }
        }
        @keyframes paradise-mute-pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(calc(1 + 0.05 * var(--animation-intensity))); }
        }
        @keyframes paradise-mute-shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(calc(-5px * var(--animation-intensity))); }
          75% { transform: translateX(calc(5px * var(--animation-intensity))); }
        }
        @keyframes paradise-mute-glow {
          0%, 100% { box-shadow: 0 0 calc(10px * var(--animation-intensity)) #F0716750; }
          50% { box-shadow: 0 0 calc(20px * var(--animation-intensity)) #F0716780, 0 0 calc(30px * var(--animation-intensity)) #F0716760; }
        }
        @keyframes paradise-mute-scale {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(calc(1 + 0.1 * var(--animation-intensity))); }
        }
        @keyframes paradise-mute-rotate {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        .paradise-player-container * {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
      `}} />

      {/* HERO SECTION - Simples e direto */}
      <section className="py-8 md:py-12 px-4">
        <div className="max-w-4xl mx-auto text-center space-y-6">
          {/* Logo discreta do produto */}
          <div className="flex justify-center mb-4">
            <img
              src="/logo-produto.png"
              alt="Kit Kanji Kids"
              className="w-24 h-24 md:w-32 md:h-32 object-contain drop-shadow-lg"
            />
          </div>

          {/* Logo/Badge */}
          <div className="inline-block bg-coral/10 border-2 border-coral px-6 py-2 rounded-full">
            <p className="font-nunito font-bold text-coral text-sm md:text-base">T√âCNICA JAPONESA</p>
          </div>

          {/* Headline Principal - COPY √öNICA */}
          <h1 className="font-fredoka text-3xl md:text-5xl lg:text-6xl font-bold leading-tight text-navy">
            Seu filho lendo at√©{" "}
            <span className="text-coral">5x mais r√°pido</span> com apenas 10 minutos por dia
          </h1>

          {/* Subheadline */}
          <p className="font-nunito text-lg md:text-xl text-foreground/80 max-w-2xl mx-auto">
            Grafismo Fon√©tico adaptado do m√©todo japon√™s - sem press√£o, no ritmo natural da crian√ßa
          </p>

          {/* Benef√≠cios r√°pidos com √≠cones */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl mx-auto pt-4">
            {[
              "Crian√ßas de 2 a 12 anos",
              "100+ atividades prontas",
              "Funciona com TDAH e Autismo",
              "Acesso vital√≠cio",
            ].map((benefit, index) => (
              <div key={index} className="flex items-center gap-2 text-left bg-white/50 rounded-lg p-3">
                <div className="w-5 h-5 rounded-full bg-mint flex items-center justify-center flex-shrink-0">
                  <Check className="w-3 h-3 text-white" />
                </div>
                <p className="font-inter text-sm md:text-base text-foreground/90">{benefit}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* VSL SECTION - Paradise Player 9:16 */}
      <section className="py-12 px-4 bg-gradient-to-b from-white to-soft-blue/10">
        <div className="max-w-2xl mx-auto text-center space-y-6">
          <h2 className="font-fredoka text-2xl md:text-3xl lg:text-4xl font-bold text-navy">
            Veja como funciona na pr√°tica e ganhe um presente incr√≠vel!
          </h2>
          <p className="font-nunito text-base md:text-lg text-foreground/70">
            Descubra o segredo que est√° transformando a alfabetiza√ß√£o de milhares de crian√ßas
          </p>

          {/* Paradise Player 9:16 */}
          <div className="max-w-sm mx-auto">
            <div
              id="paradisePlayer_1762642230938Container"
              className="paradise-player-container"
              style={{ position: 'relative', width: '100%', maxWidth: '800px', margin: '20px auto' }}
            >
              <div
                id="paradisePlayer_1762642230938Wrapper"
                style={{
                  position: 'relative',
                  width: '100%',
                  paddingBottom: '177.78%',
                  background: '#000',
                  borderRadius: '12px',
                  overflow: 'hidden',
                  boxShadow: '0 10px 30px rgba(0,0,0,0.3)'
                }}
              >
                <video
                  id="paradisePlayer_1762642230938"
                  style={{
                    position: 'absolute',
                    top: 0,
                    left: 0,
                    width: '100%',
                    height: '100%',
                    objectFit: 'cover',
                    cursor: 'pointer'
                  }}
                  playsInline
                  preload="auto"
                  onContextMenu={(e) => e.preventDefault()}
                >
                  <source src="/vsl-kanji-kids.mp4" type="video/mp4" />
                  Seu navegador n√£o suporta v√≠deos HTML5.
                </video>

                <div
                  id="paradisePlayer_1762642230938MuteOverlay"
                  style={{
                    position: 'absolute',
                    top: 0,
                    left: 0,
                    width: '100%',
                    height: '100%',
                    display: 'flex',
                    justifyContent: 'center',
                    alignItems: 'center',
                    background: '#00000080',
                    cursor: 'pointer',
                    zIndex: 20,
                    backdropFilter: 'blur(2px)'
                  }}
                >
                  <div
                    id="paradisePlayer_1762642230938MuteButton"
                    className="paradise-mute-bounce"
                    style={{
                      background: '#F07167',
                      padding: 'clamp(1.2rem, 5vw, 2rem) clamp(1.5rem, 7vw, 3rem)',
                      borderRadius: '12px',
                      textAlign: 'center',
                      color: 'white',
                      transition: 'transform 0.3s ease',
                      boxShadow: '0 8px 25px rgba(0,0,0,0.3)',
                      maxWidth: '90vw',
                      boxSizing: 'border-box'
                    }}
                  >
                    <div style={{ fontSize: 'clamp(0.9rem, 2.5vw, 1.1rem)', fontWeight: 700, marginBottom: '0.5rem' }}>
                      Seu v√≠deo j√° come√ßou!
                    </div>
                    <div style={{ marginBottom: '0.6rem' }}>
                      <img
                        src="https://i.postimg.cc/2j9d2jbv/R.png"
                        alt="Unmute"
                        style={{
                          width: 'clamp(2.5rem, 8vw, 3.5rem)',
                          height: 'clamp(2.5rem, 8vw, 3.5rem)',
                          filter: 'brightness(0) invert(1)',
                          display: 'inline-block'
                        }}
                      />
                    </div>
                    <div style={{ fontSize: 'clamp(0.8rem, 2.2vw, 1rem)', fontWeight: 500, opacity: 0.95 }}>
                      Clique para ativar o som
                    </div>
                  </div>
                </div>

                <div
                  id="paradisePlayer_1762642230938FakeProgressContainer"
                  style={{
                    position: 'absolute',
                    bottom: '5px',
                    left: '10px',
                    right: '10px',
                    height: '4px',
                    background: 'rgba(255,255,255,0.2)',
                    borderRadius: '2px',
                    zIndex: 20,
                    pointerEvents: 'none',
                    transition: 'bottom 0.3s ease'
                  }}
                >
                  <div
                    id="paradisePlayer_1762642230938FakeProgressBar"
                    style={{
                      height: '100%',
                      background: 'linear-gradient(90deg, #F07167, #152D4A)',
                      borderRadius: '2px',
                      width: '0%',
                      boxShadow: '0 0 8px #F0716780'
                    }}
                  />
                </div>
              </div>

              {/* CTA Button - Aparece aos 30 segundos */}
              <div
                id="paradisePlayer_1762642230938CTA"
                style={{ display: 'none', textAlign: 'center', marginTop: '20px' }}
              >
                <a
                  href="#"
                  id="paradisePlayer_1762642230938CTALink"
                  target="_blank"
                  style={{
                    background: '#F07167',
                    color: 'white',
                    padding: '15px 30px',
                    borderRadius: '9999px',
                    textDecoration: 'none',
                    fontWeight: 'bold',
                    boxShadow: '0 6px 20px rgba(0,0,0,0.4)',
                    animation: 'paradise-pulse 2s infinite',
                    display: 'inline-block'
                  }}
                >
                  Quero meu filho lendo
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* PORQUE ESCOLHER - Se√ß√£o com imagem de background estrat√©gica */}
      <section
        className="py-16 px-4 relative overflow-hidden"
        style={{
          backgroundImage: "url('/imagens-melhorias/background-porque-precisa-kit.jpg')",
          backgroundSize: "cover",
          backgroundPosition: "center 30%",
          backgroundBlendMode: "overlay",
          backgroundColor: "rgba(255, 255, 255, 0.96)"
        }}
      >
        <div className="max-w-4xl mx-auto text-center space-y-8 relative z-10">
          <h2 className="font-fredoka text-3xl md:text-4xl lg:text-5xl font-bold leading-tight">
            PORQUE ESCOLHER O<br />
            <span className="text-coral">KIT KANJI KIDS?</span>
          </h2>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {[
              { icon: "üéØ", text: "Estimule o desenvolvimento integral de forma envolvente" },
              { icon: "üß†", text: "Enrique√ßa o aprendizado com atividades que despertam curiosidade" },
              { icon: "üé®", text: "Divirta-se enquanto aprende com exerc√≠cios cativantes" },
              { icon: "üí∞", text: "Aproveite o melhor do ensino, com pre√ßo acess√≠vel" },
            ].map((item, index) => (
              <div key={index} className="flex items-start gap-4 bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-md border-2 border-mint/20">
                <div className="text-4xl flex-shrink-0">{item.icon}</div>
                <p className="font-nunito text-base md:text-lg text-navy text-left">{item.text}</p>
              </div>
            ))}
          </div>

          <div className="bg-gradient-to-r from-coral/10 to-mint/10 rounded-2xl p-6 md:p-8 border-2 border-coral/30">
            <p className="font-fredoka text-xl md:text-2xl font-bold text-coral mb-3">PARA QUALQUER CRIAN√áA!</p>
            <p className="font-nunito text-lg md:text-xl text-navy">
              VOC√ä SABIA QUE A DIVERS√ÉO PODE SER A CHAVE<br className="hidden md:block" />
              PARA O APRENDIZADO SIGNIFICATIVO?
            </p>
          </div>
        </div>
      </section>

      {/* COMO FUNCIONA - Se√ß√£o com imagem estrat√©gica */}
      <section className="py-16 px-4 bg-gradient-to-b from-white to-beige/20">
        <div className="max-w-5xl mx-auto text-center space-y-12">
          <h2 className="font-fredoka text-3xl md:text-4xl lg:text-5xl font-bold text-navy">COMO FUNCIONA?</h2>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {[
              {
                icon: "üìß",
                title: "CHEGA NO E-MAIL",
                text: "Ap√≥s a compra voc√™ recebe no e-mail o acesso √† plataforma com arquivos PDF.",
              },
              {
                icon: "üñ®Ô∏è",
                title: "VOC√ä IMPRIME",
                text: "Voc√™ pode imprimir quando quiser, pois o acesso √© VITAL√çCIO.",
              },
              {
                icon: "‚ù§Ô∏è",
                title: "OS PEQUENOS AMAM",
                text: "M√ÉOS √Ä OBRA! Importante que sempre auxilie seu pequeno nas atividades.",
              },
            ].map((step, index) => (
              <div key={index} className="bg-white rounded-2xl p-8 shadow-lg border-2 border-soft-blue/20 hover:scale-105 transition-transform">
                <div className="text-6xl mb-4">{step.icon}</div>
                <h3 className="font-fredoka text-xl md:text-2xl font-bold text-coral mb-3">{step.title}</h3>
                <p className="font-inter text-base text-foreground/80">{step.text}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* CARROSSEL DE ATIVIDADES - Componente completo importado */}
      <WhatIsIncludedSection />

      {/* DEPOIMENTOS EM √ÅUDIO - Componente completo importado */}
      <AudioTestimonialsSection />

      {/* B√îNUS - Componente completo com mockups importado */}
      <BonusSection />

      {/* PRICING SECTION - Componente original importado */}
      <PricingSection />

      {/* FAQ - Componente importado */}
      <FAQSection />

      {/* FOOTER - Componente importado */}
      <Footer />

      {/* WhatsApp Button - Componente importado */}
      <WhatsAppButton />

      {/* Paradise Player Script */}
      <script dangerouslySetInnerHTML={{ __html: `
        (function() {
          const video = document.getElementById('paradisePlayer_1762642230938');
          const muteOverlay = document.getElementById('paradisePlayer_1762642230938MuteOverlay');
          const fakeProgressBar = document.getElementById('paradisePlayer_1762642230938FakeProgressBar');
          const ctaButton = document.getElementById('paradisePlayer_1762642230938CTA');
          const ctaLink = document.getElementById('paradisePlayer_1762642230938CTALink');

          if (!video) { console.error('Paradise Player: Video element not found.'); return; }

          video.playbackRate = 1;
          video.muted = true;
          let playPromise = video.play();
          if (playPromise !== undefined) {
            playPromise.catch(error => { /* Autoplay was prevented. */ });
          }

          if (muteOverlay) {
            const unmuteHandler = () => {
              video.muted = false;
              video.currentTime = 0;
              video.play();
              muteOverlay.style.opacity = '0';
              setTimeout(() => { muteOverlay.style.display = 'none'; }, 300);
              if (window.paradiseTracker && window.paradiseTracker.send) {
                window.paradiseTracker.send('unmute');
                window.paradiseTracker.send('play');
              }
            };
            muteOverlay.addEventListener('click', unmuteHandler, { once: true });
            muteOverlay.addEventListener('touchend', unmuteHandler, { once: true });
          }

          video.addEventListener('click', () => {
            if (video.paused) video.play();
            else video.pause();
          });

          // Setup UTM tracking for CTA
          function setupUTMTracking() {
            if (!ctaLink) return;
            const urlParams = new URLSearchParams(window.location.search);
            const utmKeys = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];
            const baseUrl = 'https://www.ggcheckout.com/checkout/v2/50wDz3HYenjVvuvmY2Zv';
            try {
              const url = new URL(baseUrl);
              utmKeys.forEach(key => {
                if (urlParams.has(key)) { url.searchParams.set(key, urlParams.get(key)); }
              });
              ctaLink.href = url.toString();
            } catch(e) { ctaLink.href = baseUrl; }
          }
          setupUTMTracking();

          video.addEventListener('timeupdate', function() {
            if (!video.duration || !fakeProgressBar) return;

            // Fake progress bar logic
            let fakeProgressValue;
            const realProgress = video.currentTime / video.duration;
            const phase1Threshold = 15 / 100;
            const targetProgress = 50 / 100;
            if (realProgress <= phase1Threshold) {
              fakeProgressValue = (realProgress / phase1Threshold) * targetProgress;
            } else {
              const remainingRealProgress = (realProgress - phase1Threshold) / (1 - phase1Threshold);
              const remainingFakeProgress = (1 - targetProgress) * remainingRealProgress;
              fakeProgressValue = targetProgress + remainingFakeProgress;
            }
            fakeProgressBar.style.width = (Math.min(fakeProgressValue, 1) * 100) + '%';

            // CTA button appearance at 30 seconds
            if (ctaButton && video.currentTime >= 30 && ctaButton.style.display === 'none') {
              ctaButton.style.display = 'block';
              ctaButton.style.animation = 'paradise-fadeInUp 0.5s ease-out forwards';
            }
          });

          const storageKey = 'paradise_time_paradisePlayer_1762642230938';
          video.addEventListener('loadedmetadata', () => {
            const savedTime = localStorage.getItem(storageKey);
            if (savedTime) video.currentTime = parseFloat(savedTime);
          });
          video.addEventListener('timeupdate', () => {
            if (video.currentTime > 1 && video.currentTime < video.duration - 5) {
              localStorage.setItem(storageKey, video.currentTime);
            }
          });
          video.addEventListener('ended', () => { localStorage.removeItem(storageKey); });
        })();
      `}} />
    </div>
  );
});

IndexSimple.displayName = "IndexSimple";

export default IndexSimple;
